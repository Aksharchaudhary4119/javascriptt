<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        label {
            font-weight: 900;
        }

        form span {
            color: red;
        }

        /* input:not([value]){
            border: 1px solid red;
        } */

        input:required {
            border: 1px solid green;
        }

        input:required:invalid {
            border: 1px solid red;
        }

        div:empty {
            border: 1px solid red;
            margin: 10px;
            padding: 10px;
        }
    </style>
</head>

<body>
    <div>

    </div>

    <div></div>

    <form method="post" id="form">

        <table>
            <tr>
                <td><label for="username">User Name</label></td>
                <td>
                    <input type="text" name="username" id="username" required>
                    <!-- <span id="usernameerror">*</span> -->
                </td>
            </tr>
            <tr>
                <td><label for="password">Password</label></td>
                <td>
                    <input type="text" name="password" id="password" required>
                    <!-- <span id="passworderror">*</span> -->
                </td>
            </tr>
            <tr>
                <td><label for="email">Email</label></td>
                <td>
                    <input type="email" name="email" id="email" required>
                </td>
            </tr>
            <tr>
                <td><label for="mobile">Mobile</label></td>
                <td>
                    <input type="tel" name="mobile" id="mobile" required>
                </td>
            </tr>
            <tr>
                <td><label for="address">address</label></td>
                <td>
                    <input type="text" name="address" id="address">
                </td>
            </tr>
            <tr>
                <td><label for="address">City</label></td>
                <td>
                    <input type="text" name="city" id="city" required>
                </td>
            </tr>
            <tr>
                <td><label for="address">State</label></td>
                <td>
                    <input type="text" name="state" id="state">
                </td>
            </tr>
            <tr>
                <td><input type="submit" name="btn" id="btn"></td>
            </tr>
        </table>
    </form>
    <!-- <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script> -->
    <script>
        //        $('input[required]').change(function(){
        //    alert('required')
        // });

        // console.log(document.getElementById("form").querySelectorAll("[required]")); 
        // console.log(document.querySelectorAll("form")); 

        const requiredInputs = document.querySelectorAll('input[required], textarea[required], select[required]');
        console.log(requiredInputs);

        requiredInputs.forEach(element => {
            // console.log(element);
            element.addEventListener("blur", function () {
                var dateSpan = document.createElement('span')
                // console.log("blur inp",this);
                if (this.value == "") {
                    console.log("this filed is reuqired!!!");
                    dateSpan.innerHTML = "this filed is reuqired!!!";
                    // console.log(dateSpan);
                    // this.appendChild(dateSpan);
                    console.log("inside if", this.parentNode);
                    console.log("inside if", this.parentNode.children[2]);
                    if (this.parentNode.children[1] == undefined) {
                        this.parentNode.appendChild(dateSpan);
                    }
                    // document.getElementById(spnid).innerHTML = "This field is reuqired"
                } else {
                    console.log("done");
                    // document.getElementById(spnid).innerHTML = ""
                }
            })
        });
        function serialize(form) {
            var inputs = form.elements;
            var array = {};
            for (i = 0; i < inputs.length; i++) {
                // var inputNameValue =  + '=' + inputs[i].value;
                // array.push(inputNameValue);
                array[inputs[i].name] =  inputs[i].value
            }
            return array;
        }
        document.getElementById("form").addEventListener("submit", function (e) {
            // alert("Done")
            e.preventDefault();
            // var dataToSend = document.querySelector("form");
            // console.log($(this).serializeArray());
            var form = document.getElementById("form");//get the id of your form. i am assuming the id to be named form.
            var form_data = JSON.stringify(serialize(form));
            document.cookie = `formData=${form_data}`;
            console.log(form_data);
            window.location.href="otherpage.html"
        })

    </script>
</body>

</html>